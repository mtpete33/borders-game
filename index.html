<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Borders Word Game Official</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Agdasima:wght@400;700&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">

  <!-- Toastr CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <!-- Toastr JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <!-- <link rel="manifest" href="/site.webmanifest"> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "q7rg5jr2z0");
  </script>
  <script src="https://kit.fontawesome.com/b8cfe60a23.js" crossorigin="anonymous"></script>

</head>

<body>

  <div id="inAppWarning" style="display:none; margin-top: 275px;">
    <p>You’re using the Instagram or Facebook in-app browser.  
      <strong>Google Login won’t work here.</strong>  
      Please open Borders in your default browser by clicking the three dots, and choosing 'Open in external browser'.</p>

  </div>

  <div id="normalContent">
  
  <div id="landingPage" style="display: block;">
    <!-- <h1><a href="https://bordersgame.replit.app" class="title-link">Borders</a></h1> -->
    <h1>Borders</h1>
    <button id="instructionsBtn">Instructions</button>
    <div id="instructionsContent" style="display: none;">
      <p>Welcome to Borders! In this timed, daily word game you fill in the blank squares with letters creating four valid dictionary words <em>across and down</em> (like a crossword) connecting around the border of the grid. A few letters will be filled in already. See example below. Any valid dictionary words are accepted, so there may be more than one solution to each puzzle.</p>
      <p>Click Submit when you finish to stop the clock. Solve the puzzle as quickly as you can!</p>
      <p>Come back each day for a new puzzle.</p>

      <img id="example" src="images/bordersexample.jpg" alt="game example">
    </div>
    <div>
      <button id="manageFriendsBtn" style="display:none;">Manage Friends</button>
      <button id="playBtn" style="display:none;">Play</button>
      <button id="viewSolvedBtn" style="display:none;">View Solved Puzzle</button>
      
      
      </div>
    
    <div id="loggedInAs" style="display:none;">
      
    </div>
    <a href="#" id="logoutLink" style="display:none;">Logout</a>
    <button id="signUpBtn">Sign Up</button>
    <button id="logInBtn">Email Login</button>
    <button id="googleLoginBtn" style="display:inline-flex;">
      <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google logo" style="width: 18px; height: 18px; margin-right: 8px;">
      Google Login
    </button>

      <!-- Sign Up Form -->
      <div id="signUpForm" style="display: none;" class="form-container">
          <h2>Sign Up</h2>
          <input type="text" id="username" placeholder="Username" required class="form-input">
          <div id="usernameError" style="font-size: 14px; margin-top: -10px; margin-bottom: 10px;"></div>
          <input type="email" id="email" placeholder="Email" class="form-input">
          <input type="password" id="password" placeholder="Password" class="form-input">
          <input type="password" id="confirmPassword" placeholder="Confirm Password" class="form-input">
          <button id="signUpSubmitBtn" class="form-button">Sign Up</button>

      <div id="guestPlaySection">
        <button id="guestPlayBtn">Play Now</button>
        <p id="guestLoadingMsg" style="display: none; font-size: 0.7em; color: #666;">Loading puzzle data...</p>
        <p id="guestPlayInfo">Play yesterday's puzzle without needing to sign up.</p>
      </div>

        <p id="haveAccountNotice">Already have an account? <a id="haveAccountSignIn" href="#">Sign in here.</a></p>
      </div>

    <!-- Log In Form -->
    <div id="loginForm" class="form-container">
        <h2>Log In</h2>
        <input type="email" id="loginEmail" placeholder="Email" class="form-input">
        <input type="password" id="loginPassword" placeholder="Password" class="form-input">
        <button id="logInSubmitBtn" class="form-button">Log In with Email</button>
        <p><a href="accountrecovery.html" style="font-size:18px;">Forgot your password?</a></p>

       </div>
    
    <div id="guestPlaySection">
      <button id="guestPlayBtn">Play Now</button>
      <p id="guestPlayInfo">Play yesterday's puzzle without needing to sign up.</p>
    </div>
  </div>

  
<br>




 
  
  <div id="signupSuccess" style= "display: none;"></div>
  
  <div id="gameBoard" style="display: none;">
    <div style="position: relative;">
      <h1>Borders</h1>
      <button id="helpBtn">?</button>
    </div>
    
    <!-- Help Instructions Modal -->
    <div id="instructionsModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>How to Play Borders</h3>
        <p>Fill in the blank squares with letters to create four valid dictionary words across and down (like a crossword) connecting around the border of the grid.</p>
        <p>Some letters are already filled in.</p>
        <p>Click Submit when you finish, or use Give Up to see the answers.</p>
        <img id="exampleImg" src="images/bordersexample.jpg" alt="game example" style="max-width: 240px; margin: 10px auto;">
      </div>
    </div>
    
  <div class="crossword">
      <input type="text" maxlength="1" id="cell-1" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="cell-2" class="cell" autocomplete="off" disabled>
      <input type="text" maxlength="1" id="cell-3" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="cell-4" class="cell" autocomplete="off">

      <input type="text" maxlength="1" id="cell-5" class="cell" autocomplete="off" disabled>
      <div class="black-cell"></div>
      <div class="black-cell"></div>
      <input type="text" maxlength="1" id="cell-6" class="cell" autocomplete="off" disabled>

      <input type="text" maxlength="1" id="cell-7" class="cell" autocomplete="off">
      <div class="black-cell"></div>
      <div class="black-cell"></div>
      <input type="text" maxlength="1" id="cell-8" class="cell" autocomplete="off">

      <input type="text" maxlength="1" id="cell-9" class="cell" autocomplete="off" disabled>
      <div class="black-cell"></div>
      <div class="black-cell"></div>
      <input type="text" maxlength="1" id="cell-10" class="cell" autocomplete="off" disabled>

      <input type="text" maxlength="1" id="cell-11" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="cell-12" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="cell-13" class="cell" autocomplete="off" disabled>
      <input type="text" maxlength="1" id="cell-14" class="cell" autocomplete="off">
  </div>


    <!-- New Onscreen Keyboard -->
    <div id="virtual-keyboard" class="keyboard-container">
        <div class="keyboard-row">
            <button class="key" data-key="q">Q</button>
            <button class="key" data-key="w">W</button>
            <button class="key" data-key="e">E</button>
            <button class="key" data-key="r">R</button>
            <button class="key" data-key="t">T</button>
            <button class="key" data-key="y">Y</button>
            <button class="key" data-key="u">U</button>
            <button class="key" data-key="i">I</button>
            <button class="key" data-key="o">O</button>
            <button class="key" data-key="p">P</button>
        </div>
        <div class="keyboard-row">
            <button class="key" data-key="a">A</button>
            <button class="key" data-key="s">S</button>
            <button class="key" data-key="d">D</button>
            <button class="key" data-key="f">F</button>
            <button class="key" data-key="g">G</button>
            <button class="key" data-key="h">H</button>
            <button class="key" data-key="j">J</button>
            <button class="key" data-key="k">K</button>
            <button class="key" data-key="l">L</button>
        </div>
        <div class="keyboard-row">
            <button class="key" data-key="z">Z</button>
            <button class="key" data-key="x">X</button>
            <button class="key" data-key="c">C</button>
            <button class="key" data-key="v">V</button>
            <button class="key" data-key="b">B</button>
            <button class="key" data-key="n">N</button>
            <button class="key" data-key="m">M</button>
            <button class="key key-del" id="backspace" data-key="backspace">
                <img src="backspace.svg" alt="Backspace">
            </button>
        </div>
    </div>

  <div id="resultTime" style="display: none;"></div>
    <div id="shareButtonContainer" style="display: none;">
        
    </div>
    <div id="signUpCTA" style="display: none;"><a href="#" id="signupCTAlink">Create an account</a> to track your daily scores and add your time to the leaderboard for tomorrow's puzzle!</div>
    
    
    <button id="submitBtn">Submit</button>
    <button id="giveUpBtn">Give Up</button>

    <!-- Give Up Confirmation Modal -->
    <div id="giveUpModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h3>Are you sure you want to give up and see the answers?</h3>
        <button id="confirmGiveUpBtn">Yes, I give up</button>
        <button id="cancelGiveUpBtn">No, go back to puzzle</button>
      </div>
    </div>

  </div>



  
  <!-- Leaderboard Element -->
  <div id="guestGameBoard" style="display:none;">
    <div style="position: relative;">
      <h1 id="guestH1">Borders</h1>
      <button id="guestHelpBtn">?</button>
    </div>
    
    <!-- Help Instructions Modal -->
    <div id="guestInstructionsModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>How to Play Borders</h3>
        <p>Fill in the blank squares with letters to create four valid dictionary words across and down (like a crossword) connecting around the border of the grid.</p>
        <p>Some letters are already filled in.</p>
        <p>Click Submit when you finish, or use Give Up to see the answers.</p>
        <img id="guestExampleImg" src="images/bordersexample.jpg" alt="game example" style="max-width: 240px; margin: 10px auto;">
      </div>
    </div>

    <div class="crossword" id="guestCrossword">
      <input type="text" maxlength="1" id="guest-cell-1" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="guest-cell-2" class="cell guest-filled-cell" autocomplete="off" disabled>
      <input type="text" maxlength="1" id="guest-cell-3" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="guest-cell-4" class="cell" autocomplete="off">

      <input type="text" maxlength="1" id="guest-cell-5" class="cell guest-filled-cell" autocomplete="off" disabled>
      <div class="black-cell"></div>
      <div class="black-cell"></div>
      <input type="text" maxlength="1" id="guest-cell-6" class="cell guest-filled-cell" autocomplete="off" disabled>

      <input type="text" maxlength="1" id="guest-cell-7" class="cell" autocomplete="off">
      <div class="black-cell"></div>
      <div class="black-cell"></div>
      <input type="text" maxlength="1" id="guest-cell-8" class="cell" autocomplete="off">

      <input type="text" maxlength="1" id="guest-cell-9" class="cell guest-filled-cell" autocomplete="off" disabled>
      <div class="black-cell"></div>
      <div class="black-cell"></div>
      <input type="text" maxlength="1" id="guest-cell-10" class="cell guest-filled-cell" autocomplete="off" disabled>

      <input type="text" maxlength="1" id="guest-cell-11" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="guest-cell-12" class="cell" autocomplete="off">
      <input type="text" maxlength="1" id="guest-cell-13" class="cell guest-filled-cell" autocomplete="off" disabled>
      <input type="text" maxlength="1" id="guest-cell-14" class="cell" autocomplete="off">
    </div>
    <h5 style="margin:5px 0;">You are playing yesterday's puzzle as Guest.</h5>
    <!-- Virtual Keyboard for Guest -->
    <div id="guest-virtual-keyboard" class="keyboard-container">
        <div class="keyboard-row">
            <button class="guest-key" data-key="q">Q</button>
            <button class="guest-key" data-key="w">W</button>
            <button class="guest-key" data-key="e">E</button>
            <button class="guest-key" data-key="r">R</button>
            <button class="guest-key" data-key="t">T</button>
            <button class="guest-key" data-key="y">Y</button>
            <button class="guest-key" data-key="u">U</button>
            <button class="guest-key" data-key="i">I</button>
            <button class="guest-key" data-key="o">O</button>
            <button class="guest-key" data-key="p">P</button>
        </div>
        <div class="keyboard-row">
            <button class="guest-key" data-key="a">A</button>
            <button class="guest-key" data-key="s">S</button>
            <button class="guest-key" data-key="d">D</button>
            <button class="guest-key" data-key="f">F</button>
            <button class="guest-key" data-key="g">G</button>
            <button class="guest-key" data-key="h">H</button>
            <button class="guest-key" data-key="j">J</button>
            <button class="guest-key" data-key="k">K</button>
            <button class="guest-key" data-key="l">L</button>
        </div>
        <div class="keyboard-row">
            <button class="guest-key" data-key="z">Z</button>
            <button class="guest-key" data-key="x">X</button>
            <button class="guest-key" data-key="c">C</button>
            <button class="guest-key" data-key="v">V</button>
            <button class="guest-key" data-key="b">B</button>
            <button class="guest-key" data-key="n">N</button>
            <button class="guest-key" data-key="m">M</button>
            <button class="guest-key guest-key-del" id="guest-backspace" data-key="backspace">
                <img src="backspace.svg" alt="Backspace">
            </button>
        </div>
    </div>

    <div id="guestResultTime" style="display: none;"></div>
    
    <div id="guestSignUpCTA" style="display: none;">
      Create an account to play today's puzzle, track your daily scores and follow your friends scores, and be eligible to get your time on the leaderboard!
      <button id="guestSignUpBtn" class="form-button">Sign Up Now</button>
    </div>
    
    
    
    <button id="guestSubmitBtn">Submit</button>
    <button id="guestGiveUpBtn">Give Up</button>

    <div id="guestLeaderboardContainer" style="display: none; margin-top: 20px;"></div>
    
    <button id="guestBackBtn">Back to Home</button>
    
    <!-- Give Up Confirmation Modal for Guest Mode -->
    <div id="guestGiveUpModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h3>Are you sure you want to give up and see the answers?</h3>
        <button id="guestConfirmGiveUpBtn">Yes, I give up</button>
        <button id="guestCancelGiveUpBtn">No, go back to puzzle</button>
      </div>
    </div>
  </div>

  <div id="leaderboard" style="display:none;">
    <!-- <div class="new-feature-banner">New Leaderboards!</div> -->
      <div class="leaderboard-header">
        
        <h2>Leaderboard</h2>
        
      </div>

      <div id="friendsOrGlobal">
        <button id="friendsFilterBtn">Friends</button><button id="globalFilterBtn" class="active">Global</button>
      </div>
    
      <div class="leaderboard-filters">
        <button class="filter-btn active" id="todayFilter">Date</button>
        <button class="filter-btn" id="bestTimeFilter">Best Time</button>
        <button class="filter-btn" id="mostWinsFilter">Most Wins</button>
        
      </div>
    <button class="nav-arrow" id="prevDay">&#9664;</button>
      <div id="leaderboardDate"></div>
    <button class="nav-arrow" id="nextDay">&#9654;</button>
    <div id="leaderboardContent">
    <table id="leaderboardTable">
      <thead>
        <tr>
          <th>Rank</th>
          <th>User</th>
          <th>Time</th>
          <th>Date</th>
          <th>Puzzle #</th>
          <th>Answers</th>
        </tr>
      </thead>
      <tbody>
        <!-- Leaderboard entries will be dynamically added here -->
      </tbody>
    </table>

    </div>

    <button id="shareBtn" class="form-button">Share</button>
    <p id="newFriendsAlert">Use the Friends leaderboard filter to view only your friend group rankings. Add friends by clicking their <span style="color: #359235;font-size:20px;border: 1px solid #7d7d7d;border-radius: 4px;padding: 0px 4px; font-family: 'Arial';">+</span> button or 'Manage Friends' below.</p>
    <button id="manageFriendsBtn" style="font-size:16px;">Manage Friends</button>
    <button id="backToHomeBtn">Back to Home</button>
    
    <br>
  </div>

  
  
  <footer>
    <span style="margin-right:8px;"><a href="https://www.facebook.com/profile.php?id=61573102065504"><i class="fa-brands fa-square-facebook fa-2xl" style="color: #000000;"></i></a></span>
    
    <a href="https://www.instagram.com/bordersgame/"><i class="fa-brands fa-instagram fa-2xl" style="color: #000000;"></i></a>
    <!-- <a href="https://bordersgame.replit.app/"><h1 style="font-size:16px;">Borders</h1></a> -->
    <p>&copy;2024 - <span id="year"></span> MP Web Development. All rights reserved.</p>
  </footer>

  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
  import { getFirestore, doc, getDoc, collection, query, where, limit, orderBy } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
    import { getAuth, signOut, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
    import { signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCll82_qmIjuFIuItdfU6gRTMLKXzndkq4",
    authDomain: "borders-game.firebaseapp.com",
    projectId: "borders-game",
    storageBucket: "borders-game.appspot.com",
    messagingSenderId: "575743641828",
    appId: "1:575743641828:web:7d6fcdc9f059780cff44f1",
    measurementId: "G-MLSC33TSZ6"
  };

  // Initialize Firebase and Firestore
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  window.db = getFirestore(app); // Expose the Firestore instance to to be accessible in script.js
  const auth = getAuth(app); // Expose the Auth instance to be accessible in script.js
  window.auth = auth; // Expose the Auth instance to be accessible in script.js
    // window.auth = getAuth();
</script>
  
  

  <script type="module" src="script.js"></script>
  

    <script>
      // Get the current year
      const currentYear = new Date().getFullYear();
      // Set the year in the HTML
      document.getElementById('year').textContent = currentYear;

      function isInAppBrowser() {
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        return ua.includes("Instagram") || ua.includes("FBAN") || ua.includes("FBAV");
      }

      document.addEventListener('DOMContentLoaded', () => {
        if (isInAppBrowser()) {
          document.getElementById('inAppWarning').style.display = 'block';
          document.getElementById('normalContent').style.display = 'none';
        }
      });
    </script>

  </div>
</body>

</html>